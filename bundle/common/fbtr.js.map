{"version":3,"sources":["../../common/fbtr.js"],"names":["fbtr","APP_ID","PAGE_ID","fbtrEvents","LEADGENBOT_LAUNCH_APP","LEADGENBOT_USER_LOGIN","LEADGENBOT_CONNECT_PAGE","LEADGENBOT_LEAD","LEADGENBOT_EXPORT_LEAD","LEADGENBOT_QUESTIONAIRE_UPDATE","LEADGENBOT_MSG_RECEIVED","LEADGENBOT_MSG_SENT","customEvent","recipientId","params","event","custom_events","JSON","stringify","_eventName","_valueToSum","fb_currency","utm_source","constant","HEROKU_APP_URL","advertiser_tracking_enabled","application_tracking_enabled","page_id","page_scoped_user_id","anon_id","request","post","url","form","then","catch","_err"],"mappings":";;;;;;QAkBgBA,I,GAAAA,I;;AAlBhB;;;;AAEA;;;;;;AAEA,IAAMC,SAAS,eAAf;AACA,IAAMC,UAAU,eAAhB;;AAEO,IAAIC,kCAAa;AACtBC,yBAAuB,uBADD;AAEtBC,yBAAuB,uBAFD;AAGtBC,2BAAyB,yBAHH;AAItBC,mBAAiB,iBAJK;AAKtBC,0BAAwB,wBALF;AAMtBC,kCAAgC,gCANV;AAOtBC,2BAAyB,yBAPH;AAQtBC,uBAAqB;AARC,CAAjB;;AAWA,SAASX,IAAT,CAAcY,WAAd,EAA2BC,WAA3B,EAAwC;AAC7C,MAAMC,SAAS;AACbC,WAAO,mBADM;AAEbC,mBAAeC,KAAKC,SAAL,CAAe,CAAC;AAC7BC,kBAAYP,WADiB;AAE7BQ,mBAAa,CAFgB;AAG7BC,mBAAa,KAHgB;AAI7BC,kBAAYL,KAAKC,SAAL,CAAe,CAACK,mBAASC,cAAV,CAAf;AAJiB,KAAD,CAAf,CAFF;AAQbC,iCAA6B,CARhB;AASbC,kCAA8B,CATjB;AAUbC,aAASzB;AAVI,GAAf;AAYA,MAAIW,WAAJ,EAAiB;AACfC,WAAOc,mBAAP,GAA6Bf,WAA7B;AACD,GAFD,MAEO;AACLC,WAAOe,OAAP,GAAiB,CAAjB;AACD;AACD,SAAOC,yBAAQC,IAAR,CAAa;AAClBC,yCAAoC/B,MAApC,gBADkB;AAElBgC,UAAMnB;AAFY,GAAb,EAINoB,IAJM,CAID,YAAM;AACV;AACA;AACD,GAPM,EAQNC,KARM,CAQA,UAACC,IAAD,EAAU;AACf;AACA;AACD,GAXM,CAAP;AAYD","file":"fbtr.js","sourcesContent":["import request from 'request-promise';\n\nimport constant from 'common/constant';\n\nconst APP_ID = 132502590902997;\nconst PAGE_ID = 357549008061567;\n\nexport let fbtrEvents = {\n  LEADGENBOT_LAUNCH_APP: 'LEADGENBOT_LAUNCH_APP',\n  LEADGENBOT_USER_LOGIN: 'LEADGENBOT_USER_LOGIN',\n  LEADGENBOT_CONNECT_PAGE: 'LEADGENBOT_CONNECT_PAGE',\n  LEADGENBOT_LEAD: 'LEADGENBOT_LEAD',\n  LEADGENBOT_EXPORT_LEAD: 'LEADGENBOT_EXPORT_LEAD',\n  LEADGENBOT_QUESTIONAIRE_UPDATE: 'LEADGENBOT_QUESTIONAIRE_UPDATE',\n  LEADGENBOT_MSG_RECEIVED: 'LEADGENBOT_MSG_RECEIVED',\n  LEADGENBOT_MSG_SENT: 'LEADGENBOT_MSG_SENT',\n};\n\nexport function fbtr(customEvent, recipientId) {\n  const params = {\n    event: 'CUSTOM_APP_EVENTS',\n    custom_events: JSON.stringify([{\n      _eventName: customEvent,\n      _valueToSum: 1,\n      fb_currency: 'USD',\n      utm_source: JSON.stringify([constant.HEROKU_APP_URL]),\n    }]),\n    advertiser_tracking_enabled: 1,\n    application_tracking_enabled: 1,\n    page_id: PAGE_ID,\n  };\n  if (recipientId) {\n    params.page_scoped_user_id = recipientId;\n  } else {\n    params.anon_id = 0;\n  }\n  return request.post({\n    url : `https://graph.facebook.com/${APP_ID}/activities`,\n    form: params,\n  })\n  .then(() => {\n    // simple ignore\n    // console.log(`Done sent measurement ${customEvent}`);\n  })\n  .catch((_err) => {\n    // simply ignore any errs\n    // console.log(_err.message);\n  });\n}\n"]}