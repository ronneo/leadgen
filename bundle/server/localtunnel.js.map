{"version":3,"sources":["../../server/localtunnel.js"],"names":["port","parseInt","process","env","PORT","localtunnel_service_port","_err","tunnel","logger","info","url","app","cwd","server","http","createServer","listen","get","_req","res","status","send"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAOC,SAASC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA7B,EAAmC,EAAnC,CAAb;AACA,IAAMC,2BAA2BL,OAAO,CAAxC;;AAEA,2BAAYA,IAAZ,EAAkB,UAACM,IAAD,EAAOC,MAAP,EAAkB;AAClCC,mBAAOC,IAAP,0CAAmDT,IAAnD,kBAAoEO,OAAOG,GAA3E;;AAEA,MAAMC,MAAM,6BAAc,wBAAd,EAAyBT,QAAQU,GAAR,EAAzB,EAAwCJ,gBAAxC,CAAZ;AACA,MAAMK,SAASC,eAAKC,YAAL,CAAkBJ,GAAlB,CAAf;AACAE,SAAOG,MAAP,CAAcX,wBAAd,EAAwC,UAACC,IAAD,EAAU;AAChDK,QAAIM,GAAJ,CAAQ,cAAR,EAAwB,UAACC,IAAD,EAAOC,GAAP,EAAe;AACrCA,UAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBd,OAAOG,GAA5B;AACD,KAFD;AAGAF,qBAAOC,IAAP,0CAAmDJ,wBAAnD;AACD,GALD;AAMD,CAXD","file":"localtunnel.js","sourcesContent":["import express from 'express';\nimport ExpressHelper from 'server/helper/ExpressHelper';\nimport http from 'http';\nimport logger from 'common/logger';\nimport localtunnel from 'localtunnel';\n\nconst port = parseInt(process.env.PORT || 5000, 10);\nconst localtunnel_service_port = port + 1;\n\nlocaltunnel(port, (_err, tunnel) => {\n  logger.info(`Will tunneling local server on port ${port} through: ${tunnel.url}`);\n\n  const app = ExpressHelper(express(), process.cwd(), logger);\n  const server = http.createServer(app);\n  server.listen(localtunnel_service_port, (_err) => {\n    app.get('/localtunnel', (_req, res) => {\n      res.status(200).send(tunnel.url);\n    });\n    logger.info(`Localtunnel service started at port ${localtunnel_service_port}`);\n  });\n});\n"]}