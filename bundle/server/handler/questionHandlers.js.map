{"version":3,"sources":["../../../server/handler/questionHandlers.js"],"names":["NEED_NO_ANSWER","NEED_ANSWER","questionHandlerMap","psid","question","recipient","id","message","text","quick_replies","options","map","option","resp_payload","attachment","type","payload","template_type","buttons","url","title","urlText","questionExpectMap"],"mappings":";;;;;AAAA,IAAMA,iBAAiB,IAAvB;AACA,IAAMC,cAAc,KAApB;;AAEO,IAAIC,qBAAqB;AAC9B,cAAY,kBAACC,IAAD,EAAOC,QAAP,EAAoB;AAC9B,WAAO,CACL;AACEC,iBAAW,EAAEC,IAAIH,IAAN,EADb;AAEEI,eAAS,EAAEC,MAAMJ,SAASI,IAAjB;AAFX,KADK,EAKLR,cALK,CAAP;AAOD,GAT6B;;AAW9B,cAAY,kBAACG,IAAD,EAAOC,SAAP,EAAoB;AAC9B,WAAO,CACL;AACEC,iBAAW,EAAEC,IAAIH,IAAN,EADb;AAEEI,eAAS;AACPC,cAAMJ,UAASI,IADR;AAEPC,uBAAeL,UAASM,OAAT,CAAiBC,GAAjB,CAAqB,UAACC,MAAD,EAAY;AAC9C,iBAAO;AACL,4BAAgB,MADX;AAEL,qBAASA,OAAOJ,IAFX;AAGL,uBAAWI,OAAOC;AAHb,WAAP;AAKD,SANc;AAFR;AAFX,KADK,EAcLZ,WAdK,CAAP;AAgBD,GA5B6B;;AA8B9B,WAAS,eAACE,IAAD,EAAOC,QAAP,EAAoB;AAC3B,WAAO,CACL;AACEC,iBAAW,EAAEC,IAAIH,IAAN,EADb;AAEEI,eAAS,EAAEC,MAAMJ,SAASI,IAAjB;AAFX,KADK,EAKLP,WALK,CAAP;AAOD,GAtC6B;;AAwC9B,SAAO,YAACE,IAAD,EAAOC,QAAP,EAAoB;AACzB,WAAO,CACL;AACEC,iBAAW,EAAEC,IAAIH,IAAN,EADb;AAEEI,eAAS;AACPO,oBAAY;AACVC,gBAAM,UADI;AAEVC,mBAAS;AACPC,2BAAe,QADR;AAEPT,kBAAMJ,SAASI,IAFR;AAGPU,qBAAQ,CAAC;AACPH,oBAAM,SADC;AAEPI,mBAAKf,SAASe,GAFP;AAGPC,qBAAOhB,SAASiB,OAHT;AAIP,sCAAwB;AAJjB,aAAD;AAHD;AAFC;AADL;AAFX,KADK,EAmBLrB,cAnBK,CAAP;AAqBD;AA9D6B,CAAzB;;;AAiEA,IAAIsB,gDAAoB;AAC7B,cAAY,aADiB;AAE7B,WAAS;AAFoB,CAAxB","file":"questionHandlers.js","sourcesContent":["const NEED_NO_ANSWER = true;\nconst NEED_ANSWER = false;\n\nexport let questionHandlerMap = {\n  'greeting': (psid, question) => {\n    return [\n      {\n        recipient: { id: psid },\n        message: { text: question.text },      \n      }, \n      NEED_NO_ANSWER,\n    ];\n  },\n\n  'question': (psid, question) => {\n    return [\n      {\n        recipient: { id: psid },\n        message: {\n          text: question.text,\n          quick_replies: question.options.map((option) => {\n            return {\n              'content_type': 'text',\n              'title': option.text,\n              'payload': option.resp_payload,\n            };\n          }),\n        },\n      },\n      NEED_ANSWER,\n    ];\n  },\n\n  'input': (psid, question) => {\n    return [\n      {\n        recipient: { id: psid },\n        message: { text: question.text },\n      },\n      NEED_ANSWER,\n    ];\n  },\n\n  't&c': (psid, question) => {\n    return [\n      {\n        recipient: { id: psid },\n        message: {\n          attachment: {\n            type: 'template',\n            payload: {\n              template_type: 'button',\n              text: question.text,\n              buttons:[{\n                type: 'web_url',\n                url: question.url,\n                title: question.urlText,\n                'webview_height_ratio': 'compact'\n              }]\n            }\n          }\n        },\n      },\n      NEED_NO_ANSWER\n    ];\n  },\n};\n\nexport let questionExpectMap = {\n  'question': 'quick_reply',\n  'input': 'text_input',\n};\n"]}